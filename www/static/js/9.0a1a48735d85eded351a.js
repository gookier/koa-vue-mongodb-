webpackJsonp([9],{"9gDH":function(t,e){},NBFj:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pagination"},[e("div",{staticClass:"block"},[e("el-pagination",{attrs:{"current-page":1,"page-sizes":[5,10,20,50],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:this.totalNum},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)])},staticRenderFns:[]};var i=a("VU/8")({props:["totalNum"],data:function(){return{}},mounted:function(){},methods:{handleSizeChange:function(t){this.$emit("listenPagesize",t)},handleCurrentChange:function(t){this.$emit("listenCurrentpage",t)}}},s,!1,function(t){a("RyWV")},null,null);e.a=i.exports},RyWV:function(t,e){},XS0G:function(t,e){},oHCy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("2ca6"),i=a("NBFj"),o=a("fF8F"),r=a("qrgr"),n={data:function(){return{title:"",outVisible:!1,categoryList:[{category_name:"其他",id:-1}],warehouseList:[{warehouse_name:"其他",id:-1}],dataform:{warehouse_name_id:"",warehouse_category_id:"",order_id:"",shelf_id:"",color:this.$store.state.color,position:""}}},methods:{open:function(t){var e=this;this.title=this.$t("storage.label_code")+":"+t.label_code,this.outVisible=!0,this.dataform.order_id="",this.dataform.shelf_id=t.shelf_id,this.dataform.position=t.position,this.dataform.warehouse_category_id=-1,this.dataform.warehouse_name_id=-1,Object(r.i)({}).then(function(t){t.result?e.categoryList=e.categoryList.concat(t.data_list):e.$message({showClose:!0,message:t.msg,type:"error"})})},categoryTypeChange:function(){var t=this;this.warehouseList=[{warehouse_name:"其他",id:-1}],this.warehouse_name_id=-1,Object(r.j)({warehouse_category_id:this.dataform.warehouse_category_id}).then(function(e){e.result&&(t.warehouseList=t.warehouseList.concat(e.data))})},sure:function(){var t=this;Object(o.m)(this.dataform).then(function(e){e.result?(t.outVisible=!1,t.$message({showClose:!0,message:"success",type:"success"}),t.outVisible=!1,t.$emit("changeList")):t.$message({showClose:!0,message:e.msg,type:"error"})})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.outVisible,width:"30%"},on:{"update:visible":function(e){t.outVisible=e}}},[a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[t._v(t._s(t.$t("storage.order_code")))]),t._v(" "),a("el-input",{attrs:{placeholder:t.$t("storage.orderidtips")},model:{value:t.dataform.order_id,callback:function(e){t.$set(t.dataform,"order_id",e)},expression:"dataform.order_id"}})],1),t._v(" "),a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[t._v(t._s(t.$t("storage.category_name")))]),t._v(" "),a("el-select",{attrs:{"value-key":"id"},on:{change:t.categoryTypeChange},model:{value:t.dataform.warehouse_category_id,callback:function(e){t.$set(t.dataform,"warehouse_category_id",e)},expression:"dataform.warehouse_category_id"}},t._l(t.categoryList,function(t){return a("el-option",{key:t.id,attrs:{label:t.category_name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[t._v(t._s(t.$t("storage.warehouse_name")))]),t._v(" "),a("el-select",{attrs:{"value-key":"id"},model:{value:t.dataform.warehouse_name_id,callback:function(e){t.$set(t.dataform,"warehouse_name_id",e)},expression:"dataform.warehouse_name_id"}},t._l(t.warehouseList,function(t){return a("el-option",{key:t.id,attrs:{label:t.warehouse_name,value:t.id}})}),1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.outVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sure}},[t._v(t._s(t.$t("common.sure")))])],1)])},staticRenderFns:[]};var c={components:{VOutbyposition:a("VU/8")(n,l,!1,function(t){a("q53w")},"data-v-04ab06a2",null).exports},data:function(){return{title:"",mateVisible:!1,mateInfoList:[],spliceIndex:""}},methods:{open:function(t){this.mateVisible=!0,this.mateInfoList=t.mate_info,this.title=this.$t("storage.part_num")+": "+t.part_num},takeOut:function(t,e){this.spliceIndex=e,this.$refs.outbyposition.open(t)},changeList:function(){this.mateInfoList.splice(this.spliceIndex,1)}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.title,visible:t.mateVisible},on:{"update:visible":function(e){t.mateVisible=e}}},[a("el-table",{attrs:{"header-cell-style":{background:"#DFEBF9",color:"#606266"},data:t.mateInfoList,"empty-text":t.$t("common.nodata"),border:""}},[a("el-table-column",{attrs:{label:t.$t("common.No"),type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"shelf_id",label:t.$t("storage.shelf_id")}}),t._v(" "),a("el-table-column",{attrs:{prop:"label_code",label:t.$t("storage.label_code")}}),t._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:t.$t("storage.quantity")}}),t._v(" "),a("el-table-column",{attrs:{prop:"position",label:t.$t("storage.position")}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:t.$t("common.operation"),width:"98"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!!e.row.state},on:{click:function(a){return t.takeOut(e.row,e.$index)}}},[t._v(t._s(t.$t("storage.take_out")))])]}}])})],1)],1),t._v(" "),a("v-outbyposition",{ref:"outbyposition",on:{changeList:t.changeList}})],1)},staticRenderFns:[]},d=a("VU/8")(c,u,!1,null,null,null).exports,h={data:function(){return{title:"",takeoutVisible:!1,categoryList:[{category_name:"其他",id:-1}],warehouseList:[{warehouse_name:"其他",id:-1}],dataform:{warehouse_name_id:"",warehouse_category_id:"",order_id:"",shelf_list:[],color:this.$store.state.color,part_num:""},shelflist:[]}},methods:{open:function(t){var e=this;this.title=this.$t("storage.part_num")+":"+t.part_num,this.dataform.part_num=t.part_num,this.shelflist=t.shelf_list,this.takeoutVisible=!0,this.dataform.order_id="",this.dataform.warehouse_category_id=-1,this.dataform.warehouse_name_id=-1,this.dataform.shelf_list=[],Object(r.i)({}).then(function(t){t.result?e.categoryList=e.categoryList.concat(t.data_list):e.$message({showClose:!0,message:t.msg,type:"error"})})},categoryTypeChange:function(){var t=this;this.warehouseList=[{warehouse_name:"其他",id:-1}],this.warehouse_name_id=-1,Object(r.j)({warehouse_category_id:this.dataform.warehouse_category_id}).then(function(e){e.result&&(t.warehouseList=t.warehouseList.concat(e.data))})},sure:function(){var t=this;Object(o.l)(this.dataform).then(function(e){var a=t;if(e.result){t.takeoutVisible=!1,t.$message({showClose:!0,message:"success",type:"success"});window.setTimeout(function(){a.$emit("getMaterialList")},1500)}else t.$message({showClose:!0,message:e.msg,type:"error"})})}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.takeoutVisible,width:"30%"},on:{"update:visible":function(e){t.takeoutVisible=e}}},[a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[t._v(t._s(t.$t("storage.order_code")))]),t._v(" "),a("el-input",{attrs:{placeholder:t.$t("storage.orderidtips")},model:{value:t.dataform.order_id,callback:function(e){t.$set(t.dataform,"order_id",e)},expression:"dataform.order_id"}})],1),t._v(" "),a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[t._v(t._s(t.$t("storage.category_name")))]),t._v(" "),a("el-select",{attrs:{"value-key":"id"},on:{change:t.categoryTypeChange},model:{value:t.dataform.warehouse_category_id,callback:function(e){t.$set(t.dataform,"warehouse_category_id",e)},expression:"dataform.warehouse_category_id"}},t._l(t.categoryList,function(t){return a("el-option",{key:t.id,attrs:{label:t.category_name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[t._v(t._s(t.$t("storage.warehouse_name")))]),t._v(" "),a("el-select",{attrs:{"value-key":"id"},model:{value:t.dataform.warehouse_name_id,callback:function(e){t.$set(t.dataform,"warehouse_name_id",e)},expression:"dataform.warehouse_name_id"}},t._l(t.warehouseList,function(t){return a("el-option",{key:t.id,attrs:{label:t.warehouse_name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[t._v(t._s(t.$t("storage.warehouse_name")))]),t._v(" "),a("el-checkbox-group",{model:{value:t.dataform.shelf_list,callback:function(e){t.$set(t.dataform,"shelf_list",e)},expression:"dataform.shelf_list"}},t._l(t.shelflist,function(e){return a("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}),1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.takeoutVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sure}},[t._v("确 定")])],1)])},staticRenderFns:[]};var m=a("VU/8")(h,_,!1,function(t){a("XS0G")},"data-v-27f8c7a2",null).exports,p=a("pPmT"),f={components:{VLights:s.a,VPagination:i.a,VMate:d,VTakeout:m},data:function(){return{loading:!1,dialogVisible:!1,matlist:[],totalNum:0,searchform:{part_num:"",warehouse_category_id:0,warehouse_name_id:0,description:"",start:0,rows:5},options:[{name:this.$t("storage.description"),type_id:"description"},{name:this.$t("storage.part_num"),type_id:"part_num"}],type_id:"",searchcontent:"",categoryTypeList:[{category_name:"所有",id:0}],warehouselist:[{warehouse_name:"所有",id:0}],warehouse_name_id:"",timer:null,order_id:"",title:"",materialNum:"",params:""}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},mounted:function(){this.getCategoryType(),this.getMaterialList()},methods:{getMaterialList:function(){var t=this;Object(o.d)(this.searchform).then(function(e){e.result?(t.matlist=e.mate_list,t.totalNum=e.rows):t.$message({showClose:!0,message:e.msg,type:"error"})})},refresh:function(){this.$emit("getMaterialList"),this.searchcontent="",this.type_id="",this.searchform.warehouse_category_id=0,this.searchform.warehouse_name_id=0,this.searchform.part_num="",this.searchform.description="",this.searchform.start=0,this.searchform.rows=5,this.getMaterialList()},getCategoryType:function(){var t=this;Object(r.i)({}).then(function(e){e.result&&(t.categoryTypeList=t.categoryTypeList.concat(e.data_list))})},getWarehouseList:function(){var t=this;this.warehouselist=[{warehouse_name:"所有",id:0}],this.searchform.warehouse_name_id=0,Object(r.j)({warehouse_category_id:this.searchform.warehouse_category_id}).then(function(e){e.result&&(t.warehouselist=t.warehouselist.concat(e.data))})},categoryTypeChange:function(){this.searchform.warehouse_name_id=0,this.getWarehouseList()},changePagesize:function(t){this.searchform.rows=t,this.getMaterialList()},changeCurrent:function(t){this.searchform.start=(t-1)*this.searchform.rows,this.getMaterialList()},search:function(){"part_num"==this.type_id?this.searchform.part_num=this.searchcontent:this.searchform.description=this.searchcontent,this.getMaterialList()},showMatelist:function(t){this.$refs.mate.open(t)},takeOut:function(t){this.$refs.takeout.open(t)},sure:function(){var t=this,e=this;this.params.order_id=this.order_id,this.params.warehouse_name_id=this.warehouse_name_id,Object(o.m)(this.params).then(function(a){a.result?(t.dialogVisible=!1,t.timer=window.setTimeout(function(){e.getMaterialList()},1e3)):t.$message({showClose:!0,message:a.msg,type:"error"})})},download:function(){Object(o.c)({warehouse_category_id:this.searchform.warehouse_category_id,warehouse_name_id:this.searchform.warehouse_name_id,part_num:this.searchform.part_num,description:this.searchform.description}).then(function(t){var e=Object(p.c)(t,{}),a=!!document.documentMode||"ActiveXObject"in window;if(a)navigator.msSaveOrOpenBlob(new Blob([e],{type:"text/csv"}),"物料统计信息报表.csv");else if(!a&&window.StyleMedia)navigator.msSaveOrOpenBlob(new Blob([e],{type:"text/csv"}),"物料统计信息报表.csv");else{var s=document.createElement("a");s.href=e,s.download="物料统计信息报表.csv",s.click(),window.URL.revokeObjectURL(e)}})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"storage_content"},[a("div",{staticClass:"typesearch"},[a("div",{staticClass:"typecontent"},[a("div",{staticClass:"operation_select input_wrap"},[a("el-select",{attrs:{"value-key":"id"},on:{change:t.categoryTypeChange},model:{value:t.searchform.warehouse_category_id,callback:function(e){t.$set(t.searchform,"warehouse_category_id",e)},expression:"searchform.warehouse_category_id"}},t._l(t.categoryTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.category_name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"operation_select input_wrap"},[a("el-select",{attrs:{"value-key":"id"},model:{value:t.searchform.warehouse_name_id,callback:function(e){t.$set(t.searchform,"warehouse_name_id",e)},expression:"searchform.warehouse_name_id"}},t._l(t.warehouselist,function(t){return a("el-option",{key:t.id,attrs:{label:t.warehouse_name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"operation_select input_wrap"},[a("el-select",{attrs:{"value-key":"type_id"},model:{value:t.type_id,callback:function(e){t.type_id=e},expression:"type_id"}},t._l(t.options,function(t){return a("el-option",{key:t.type_id,attrs:{change:"",label:t.name,value:t.type_id}})}),1)],1),t._v(" "),a("div",{staticClass:"input_wrap"},[a("el-input",{model:{value:t.searchcontent,callback:function(e){t.searchcontent=e},expression:"searchcontent"}})],1),t._v(" "),a("div",{staticClass:"input_wrap"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v(t._s(t.$t("common.search")))]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.refresh}},[t._v(t._s(t.$t("common.refresh")))]),t._v(" "),a("el-button",{staticClass:"downloadexc",attrs:{type:"success",size:"mini"},on:{click:t.download}},[a("i",{staticClass:"el-icon-download el-icon--right"}),t._v(t._s(t.$t("dashboard.downloadExcel")))])],1)]),t._v(" "),a("div",{staticClass:"lightscomp"},[a("v-lights")],1)]),t._v(" "),a("div",[[a("el-table",{attrs:{"header-cell-style":{background:"#DFEBF9",color:"#606266"},data:t.matlist,"empty-text":t.$t("common.nodata"),border:""}},[a("el-table-column",{attrs:{label:t.$t("common.No"),type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"part_num","show-overflow-tooltip":!0,label:t.$t("storage.part_num")}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"description",label:t.$t("storage.description")}}),t._v(" "),a("el-table-column",{attrs:{prop:"all_quantity",label:t.$t("storage.all_quantity")}}),t._v(" "),a("el-table-column",{attrs:{prop:"all_reel",label:t.$t("storage.all_reel")}}),t._v(" "),a("el-table-column",{attrs:{prop:"",width:"98"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-search",circle:"",size:"mini"},on:{click:function(a){return t.showMatelist(e.row)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:t.$t("common.operation"),width:"98"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!!e.row.state},on:{click:function(a){return t.takeOut(e.row)}}},[t._v(t._s(t.$t("storage.take_out")))])]}}])})],1)],t._v(" "),a("v-mate",{ref:"mate"}),t._v(" "),a("v-takeout",{ref:"takeout",on:{getMaterialList:t.getMaterialList}})],2),t._v(" "),a("v-pagination",{attrs:{totalNum:t.totalNum},on:{listenPagesize:t.changePagesize,listenCurrentpage:t.changeCurrent}})],1)},staticRenderFns:[]};var v=a("VU/8")(f,g,!1,function(t){a("9gDH")},"data-v-2a5cd522",null);e.default=v.exports},q53w:function(t,e){}});
//# sourceMappingURL=9.0a1a48735d85eded351a.js.map