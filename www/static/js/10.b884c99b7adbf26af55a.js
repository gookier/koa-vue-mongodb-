webpackJsonp([10],{"0Dke":function(e,r){},CJRu:function(e,r){},KbJK:function(e,r){},ZDnn:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=s("pPmT"),a={props:["searchholder"],data:function(){return{searchcontent:"",permissionFlag:Object(t.e)()}},methods:{clear:function(){},search:function(){},addUser:function(){this.$emit("listenAdd")}}},o={render:function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"usersearch"},[r("div",{staticClass:"adduser"},[r("el-button",{attrs:{type:"success",size:"mini",disabled:this.permissionFlag},on:{click:this.addUser}},[this._v(this._s(this.$t("common.add")))])],1)])},staticRenderFns:[]};var i=s("VU/8")(a,o,!1,function(e){s("0Dke")},"data-v-7a3232fc",null).exports,u=s("uIN4"),n=s("qrgr"),d={data:function(){var e=this;return{editVisible:!1,grouplist:[],categoryTypeList:[{category_name:"所有",id:0}],warehouseList:[{warehouse_name:"所有",id:0}],id:"",warehouse_category_id:"",userform:{user_group_id:null,user_passwd:"",target_user_name:"",warehouse_category_id:0,warehouse_name_id:0},rules:{target_user_name:[{required:!0,message:this.$t("user.userholder"),trigger:"blur"},{validator:function(r,s,t){0==/[\u4e00-\u9fa5_a-zA-Z0-9_]{3,16}/.test(s)?t(new Error(e.$t("user.usertips"))):t()},trigger:"blur"}],user_group_id:[{required:!0,message:this.$t("user.authorizationholder"),trigger:"change"}]}}},mounted:function(){this.userform.user_passwd="",this.userform.target_user_name=""},methods:{getUserGroupList:function(){var e=this;Object(u.f)({}).then(function(r){r.result?e.grouplist=r.data:e.$message({showClose:!0,message:r.msg,type:"error"})})},getCategoryType:function(){var e=this;Object(n.i)({}).then(function(r){r.result&&(e.categoryTypeList=e.categoryTypeList.concat(r.data_list))})},getWarehouseList:function(){var e=this;this.warehouseList=[{warehouse_name:"所有",id:0}],this.userform.warehouse_name_id=0,Object(n.j)({warehouse_category_id:this.userform.warehouse_category_id}).then(function(r){r.result&&(e.warehouseList=e.warehouselist.concat(r.data))})},categoryTypeChange:function(){this.userform.warehouse_name_id=0,this.getWarehouseList()},userDetail:function(e){this.editVisible=!0,this.id=e.user_id,this.warehouse_category_id=e.warehouse_category_id,this.userform.target_user_name=e.user_name,this.userform.user_group_id=e.user_group_id,this.userform.warehouse_category_id=e.warehouse_category_id,this.userform.warehouse_name_id=e.warehouse_name_id,this.getUserGroupList(),this.getCategoryType(),this.categoryTypeChange()},reset:function(e){this.$refs.userform.resetFields()},userSave:function(e){var r=this;this.$refs.userform.validate(function(e){if(!e)return!1;var s={warehouse_category_id:r.warehouse_category_id,target_user_id:r.user_id,target_user_name:r.userform.target_user_name,target_user_new_passwd:r.userform.user_passwd,target_user_group_id:r.userform.user_group_id,target_user_warehouse_category_id:r.userform.warehouse_category_id,target_user_warehouse_name_id:r.userform.warehouse_name_id};Object(u.b)(s).then(function(e){e.result?(r.editVisible=!1,r.$emit("getUserList")):r.$message({showClose:!0,message:e.msg,type:"error"})})})},userCancel:function(e){this.$refs.userform.resetFields(),this.editVisible=!1}}},l={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("el-dialog",{attrs:{title:e.$t("user.edituser"),visible:e.editVisible,width:"760px"},on:{"update:visible":function(r){e.editVisible=r},close:function(r){return e.reset("userform")}}},[s("div",{staticClass:"add_user_form"},[s("el-form",{ref:"userform",attrs:{inline:!0,model:e.userform,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:e.$t("user.username"),prop:"target_user_name"}},[s("el-input",{attrs:{disabled:""},model:{value:e.userform.target_user_name,callback:function(r){e.$set(e.userform,"target_user_name",r)},expression:"userform.target_user_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("user.authorization"),prop:"user_group_id"}},[s("el-select",{attrs:{placeholder:"","value-key":"id"},model:{value:e.userform.user_group_id,callback:function(r){e.$set(e.userform,"user_group_id",r)},expression:"userform.user_group_id"}},e._l(e.grouplist,function(e){return s("el-option",{key:e.id,attrs:{label:e.group_name,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("storage.category_name")}},[s("el-select",{attrs:{"value-key":"id",placeholder:"请选择库位类别",disabled:e.userform.user_group_id<=2},on:{change:e.categoryTypeChange},model:{value:e.userform.warehouse_category_id,callback:function(r){e.$set(e.userform,"warehouse_category_id",r)},expression:"userform.warehouse_category_id"}},e._l(e.categoryTypeList,function(e){return s("el-option",{key:e.id,attrs:{label:e.category_name,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("storage.warehouse_name")}},[s("el-select",{attrs:{"value-key":"id",placeholder:"请选择库位类别",disabled:e.userform.user_group_id<=3},model:{value:e.userform.warehouse_name_id,callback:function(r){e.$set(e.userform,"warehouse_name_id",r)},expression:"userform.warehouse_name_id"}},e._l(e.warehouseList,function(e){return s("el-option",{key:e.id,attrs:{label:e.warehouse_name,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{staticClass:"form_item_left",attrs:{label:e.$t("user.password")}},[s("el-input",{attrs:{"show-password":"","auto-complete":"new-password"},model:{value:e.userform.user_passwd,callback:function(r){e.$set(e.userform,"user_passwd",r)},expression:"userform.user_passwd"}})],1),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{on:{click:function(r){return e.userCancel("userform")}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.userSave("userForm")}}},[e._v(e._s(e.$t("common.save")))])],1)],1)],1)])],1)},staticRenderFns:[]};var _={data:function(){var e=this;return{addVisible:!1,grouplist:[],categoryTypeList:[{category_name:"所有",id:0}],warehouseList:[{warehouse_name:"所有",id:0}],userform:{add_user_group_id:null,add_user_passwd:"",add_user_name:"",add_warehouse_category_id:0,add_warehouse_name_id:0},rules:{add_user_name:[{required:!0,message:this.$t("user.userholder"),trigger:"blur"},{validator:function(r,s,t){0==/[\u4e00-\u9fa5_a-zA-Z0-9_]{2,16}/.test(s)?t(new Error(e.$t("user.usertips"))):t()},trigger:"blur"}],add_user_passwd:[{required:!0,message:this.$t("user.passwordholder"),trigger:"blur"}],add_user_group_id:[{required:!0,message:this.$t("user.authorizationholder"),trigger:"change"}]}}},watch:{"userform.add_user_group_id":{deep:!0,handler:function(e,r){2==e&&(this.userform.add_warehouse_category_id=0,this.userform.add_warehouse_name_id=0),3==e&&(this.userform.add_warehouse_name_id=0)}}},mounted:function(){this.userform.user_passwd="",this.userform.add_user_name=""},methods:{getUserGroupList:function(){var e=this;Object(u.f)({}).then(function(r){r.result?e.grouplist=r.data:e.$message({showClose:!0,message:r.msg,type:"error"})})},getCategoryType:function(){var e=this;Object(n.i)({}).then(function(r){r.result&&(e.categoryTypeList=e.categoryTypeList.concat(r.data_list))})},getWarehouseList:function(){var e=this;this.warehouseList=[{warehouse_name:"所有",id:0}],this.userform.add_warehouse_name_id=0,Object(n.j)({warehouse_category_id:this.userform.add_warehouse_category_id}).then(function(r){r.result&&(e.warehouseList=e.warehouseList.concat(r.data))})},categoryTypeChange:function(){this.userform.add_warehouse_name_id=0,this.getWarehouseList()},open:function(){this.getUserGroupList(),this.getCategoryType(),this.userform.add_user_group_id="",this.userform.add_user_passwd="",this.userform.add_user_name="",this.userform.add_warehouse_category_id=0,this.userform.add_warehouse_name_id=0,this.addVisible=!0},reset:function(e){this.$refs.userform.resetFields()},userSave:function(){var e=this,r=this.userform.add_user_group_id;2==r&&(this.userform.add_warehouse_category_id=0,this.userform.add_warehouse_name_id=0),3==r&&(this.userform.add_warehouse_name_id=0),this.$refs.userform.validate(function(r){if(!r)return!1;Object(u.a)(e.userform).then(function(r){r.result&&(e.addVisible=!1,e.$emit("getUserList"))})})},userCancel:function(e){this.$refs.userform.resetFields(),this.addVisible=!1}}},c={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("el-dialog",{attrs:{title:e.$t("user.adduser"),visible:e.addVisible,width:"760px"},on:{"update:visible":function(r){e.addVisible=r},close:function(r){return e.reset("userform")}}},[s("div",{staticClass:"add_user_form"},[s("el-form",{ref:"userform",attrs:{inline:!0,model:e.userform,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:e.$t("user.username"),prop:"add_user_name"}},[s("el-input",{model:{value:e.userform.add_user_name,callback:function(r){e.$set(e.userform,"add_user_name",r)},expression:"userform.add_user_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("user.authorization"),prop:"add_user_group_id"}},[s("el-select",{attrs:{placeholder:"","value-key":"id"},model:{value:e.userform.add_user_group_id,callback:function(r){e.$set(e.userform,"add_user_group_id",r)},expression:"userform.add_user_group_id"}},e._l(e.grouplist,function(e){return s("el-option",{key:e.id,attrs:{label:e.group_name,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("storage.category_name")}},[s("el-select",{attrs:{"value-key":"id",placeholder:"请选择库位类别",disabled:e.userform.add_user_group_id<=2},on:{change:e.categoryTypeChange},model:{value:e.userform.add_warehouse_category_id,callback:function(r){e.$set(e.userform,"add_warehouse_category_id",r)},expression:"userform.add_warehouse_category_id"}},e._l(e.categoryTypeList,function(e){return s("el-option",{key:e.id,attrs:{label:e.category_name,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("storage.warehouse_name")}},[s("el-select",{attrs:{"value-key":"id",placeholder:"请选择库位类别",disabled:e.userform.add_user_group_id<=3},model:{value:e.userform.add_warehouse_name_id,callback:function(r){e.$set(e.userform,"add_warehouse_name_id",r)},expression:"userform.add_warehouse_name_id"}},e._l(e.warehouseList,function(e){return s("el-option",{key:e.id,attrs:{label:e.warehouse_name,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{staticClass:"form_item_left",attrs:{label:e.$t("user.password"),prop:"add_user_passwd"}},[s("el-input",{attrs:{"show-password":"","auto-complete":"new-password"},model:{value:e.userform.add_user_passwd,callback:function(r){e.$set(e.userform,"add_user_passwd",r)},expression:"userform.add_user_passwd"}})],1),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{on:{click:function(r){return e.userCancel("userform")}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.userSave("userForm")}}},[e._v(e._s(e.$t("common.save")))])],1)],1)],1)])],1)},staticRenderFns:[]};var m={components:{VUsersearch:i,VUseredit:s("VU/8")(d,l,!1,function(e){s("CJRu")},null,null).exports,VAdduser:s("VU/8")(_,c,!1,function(e){s("KbJK")},null,null).exports},data:function(){return{loading:!0,permissionFlag:Object(t.e)(),searchholder:this.$t("user.searchholder"),user_list:[],grouplist:[],userid:""}},created:function(){},mounted:function(){this.getUserList()},methods:{getUserList:function(){var e=this;Object(u.g)({warehouse_category_id:0}).then(function(r){e.loading=!1,r.result?e.user_list=r.user_list:e.$message({showClose:!0,message:r.msg,type:"error"})})},Add:function(){this.$refs.add.open()},editUser:function(e){var r=this;this.$nextTick(function(){r.$refs.edit.userDetail(e)})},deleteUser:function(e){var r=this;this.$confirm(this.$t("user.deltips"),this.$t("user.tips"),{confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){Object(u.d)({del_user_id:e}).then(function(e){e.result&&r.getUserList()})}).catch(function(){})}}},h={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("v-usersearch",{attrs:{searchholder:e.searchholder},on:{listenAdd:e.Add}}),e._v(" "),s("v-useredit",{ref:"edit",on:{getUserList:e.getUserList}}),e._v(" "),s("v-adduser",{ref:"add",on:{getUserList:e.getUserList}}),e._v(" "),[s("el-table",{attrs:{"header-cell-style":{background:"#DFEBF9",color:"#606266"},loading:e.loading,data:e.user_list,"empty-text":e.$t("common.nodata"),border:""}},[s("el-table-column",{attrs:{label:e.$t("common.No"),type:"index",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{prop:"user_name",label:e.$t("user.username")}}),e._v(" "),s("el-table-column",{attrs:{prop:"group_name",label:e.$t("user.authorization")}}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:e.$t("common.operation"),width:"158"},scopedSlots:e._u([{key:"default",fn:function(r){return[s("el-button",{attrs:{type:"warning",size:"mini",disabled:e.permissionFlag},on:{click:function(s){return e.editUser(r.row)}}},[e._v(e._s(e.$t("common.edit")))]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",disabled:!!e.permissionFlag},on:{click:function(s){return e.deleteUser(r.row.user_id)}}},[e._v(e._s(e.$t("common.delete")))])]}}])})],1)]],2)},staticRenderFns:[]},f=s("VU/8")(m,h,!1,null,null,null);r.default=f.exports}});
//# sourceMappingURL=10.b884c99b7adbf26af55a.js.map