webpackJsonp([8],{"6Dcc":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("qrgr"),i=a("2ca6"),r={data:function(){return{warehouse_category_id:0,warehouse_name_id:0,categoryTypeList:[{category_name:"所有",id:0}],warehouseList:[{wrehouse_name:"所有",id:0}]}},mounted:function(){this.getCategoryType()},methods:{getCategoryType:function(){var e=this;Object(s.i)({}).then(function(t){t.result&&(e.categoryTypeList=e.categoryTypeList.concat(t.data_list))})},getWarehouseList:function(){var e=this;this.warehouselist=[{warehouse_name:"所有",id:0}],this.warehouse_name_id=0,Object(s.j)({warehouse_category_id:this.searchform.warehouse_category_id}).then(function(t){t.result&&(e.warehouselist=e.warehouselist.concat(t.data))})},categoryTypeChange:function(){this.searchform.warehouse_name_id=0,this.getWarehouseList()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"operation_select input_wrap"},[a("el-select",{attrs:{"value-key":"id"},on:{change:e.categoryTypeChange},model:{value:e.warehouse_category_id,callback:function(t){e.warehouse_category_id=t},expression:"warehouse_category_id"}},e._l(e.categoryTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.category_name,value:e.id}})}),1)],1),e._v(" "),a("div",{staticClass:"operation_select input_wrap"},[a("el-select",{attrs:{"value-key":"id"},model:{value:e.warehouse_name_id,callback:function(t){e.warehouse_name_id=t},expression:"warehouse_name_id"}},e._l(e.warehouseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.warehouse_name,value:e.id}})}),1)],1)])},staticRenderFns:[]};var n=a("VU/8")(r,o,!1,function(e){a("fqaS")},null,null).exports,l={components:{VLights:i.a,VWarehouseselect:n},data:function(){return{searchform:{part_num:"",warehouse_category_id:0,warehouse_name_id:0,description:"",shelf_id:"",start:0,rows:5},searchcontent:"",categoryTypeList:[{category_name:"所有",id:0}],warehouselist:[{warehouse_name:"所有",id:0}],options:[{name:this.$t("storage.shelf_id"),type_id:"shelf_id"},{name:this.$t("storage.description"),type_id:"description"},{name:this.$t("storage.part_num"),type_id:"part_num"}],type_id:""}},created:function(){this.getCategoryType()},methods:{search:function(){"shelf_id"==this.type_id&&(this.searchform.shelf_id=this.searchcontent),"description"==this.type_id&&(this.searchform.description=this.searchcontent),"part_num"==this.type_id&&(this.searchform.part_num=this.searchcontent),this.$emit("search",this.searchform)},refresh:function(){this.$emit("getMaterialList"),this.searchcontent="",this.type_id="",this.searchform.warehouse_category_id=0,this.searchform.warehouse_name_id=0,this.searchform.part_num="",this.searchform.description="",this.searchform.shelf_id="",this.searchform.start=0,this.searchform.rows=5},getCategoryType:function(){var e=this;Object(s.i)({}).then(function(t){t.result&&(e.categoryTypeList=e.categoryTypeList.concat(t.data_list))})},getWarehouseList:function(){var e=this;this.warehouselist=[{warehouse_name:"所有",id:0}],this.searchform.warehouse_name_id=0,Object(s.j)({warehouse_category_id:this.searchform.warehouse_category_id}).then(function(t){t.result&&(e.warehouselist=e.warehouselist.concat(t.data))})},categoryTypeChange:function(){this.searchform.warehouse_name_id=0,this.getWarehouseList()},changeWarehose:function(e){this.searchform.storage_location=e},typeChange:function(e){this.type_id=e}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"typesearch"},[a("div",{staticClass:"typecontent"},[a("div",{staticClass:"operation_select input_wrap"},[a("el-select",{attrs:{"value-key":"id"},on:{change:e.categoryTypeChange},model:{value:e.searchform.warehouse_category_id,callback:function(t){e.$set(e.searchform,"warehouse_category_id",t)},expression:"searchform.warehouse_category_id"}},e._l(e.categoryTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.category_name,value:e.id}})}),1)],1),e._v(" "),a("div",{staticClass:"operation_select input_wrap"},[a("el-select",{attrs:{"value-key":"id"},model:{value:e.searchform.warehouse_name_id,callback:function(t){e.$set(e.searchform,"warehouse_name_id",t)},expression:"searchform.warehouse_name_id"}},e._l(e.warehouselist,function(e){return a("el-option",{key:e.id,attrs:{label:e.warehouse_name,value:e.id}})}),1)],1),e._v(" "),a("div",{staticClass:"operation_select input_wrap"},[a("el-select",{attrs:{"value-key":"type_id",placeholder:e.$t("storage.placeholder")},on:{change:function(t){return e.typeChange(e.type_id)}},model:{value:e.type_id,callback:function(t){e.type_id=t},expression:"type_id"}},e._l(e.options,function(e){return a("el-option",{key:e.type_id,attrs:{change:"",label:e.name,value:e.type_id}})}),1)],1),e._v(" "),a("div",{staticClass:"input_wrap"},[a("el-input",{attrs:{clearable:""},model:{value:e.searchcontent,callback:function(t){e.searchcontent=t},expression:"searchcontent"}})],1),e._v(" "),a("div",{staticClass:"input_wrap"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v(e._s(e.$t("common.search")))]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.refresh}},[e._v(e._s(e.$t("common.refresh")))])],1)]),e._v(" "),a("div",{staticClass:"lightscomp"},[a("v-lights")],1)])},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("QMhJ")},null,null).exports,h=a("NBFj"),_=a("fF8F"),d={components:{VTypesearch:u,VPagination:h.a},data:function(){return{loading:!1,totalNum:0,matlist:[],start:0,rows:5,title:"",dialogVisible:!1,order_id:"",params:"",timer:null,warehouse_category_id:-1,warehouse_name_id:-1,categoryList:[{category_name:"其他",id:-1}],warehouseList:[{warehouse_name:"其他",id:-1}],materialNum:""}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},mounted:function(){this.getMaterialList()},methods:{getMaterialList:function(){var e=this;Object(_.j)({start:this.start,rows:this.rows}).then(function(t){t.result?(e.matlist=t.mate_list,e.totalNum=t.rows):e.$message({showClose:!0,message:t.msg,type:"error"})})},changePagesize:function(e){this.rows=e,this.getMaterialList()},changeCurrent:function(e){this.start=(e-1)*this.rows,this.getMaterialList()},search:function(e){var t=this;e.start=this.start,e.rows=this.rows,Object(_.o)(e).then(function(e){e.result?(t.matlist=e.mate_list,t.totalNum=e.rows):t.$message({showClose:!0,message:e.msg,type:"error"})})},takeOut:function(e){var t=this;Object(s.i)({}).then(function(e){e.result?t.categoryList=t.categoryList.concat(e.data_list):t.$message({showClose:!0,message:e.msg,type:"error"})}),this.dialogVisible=!0,this.materialNum=e.quantity,this.title=this.$t("storage.part_num")+":"+e.part_num;var a={position:e.position,shelf_id:e.shelf_id,color:this.$store.state.color,order_id:"",warehouse_name_id:-1,warehouse_category_id:-1};this.params=a},categoryTypeChange:function(){var e=this;this.warehouseList=[{warehouse_name:"其他",id:-1}],this.warehouse_name_id=-1,Object(s.j)({warehouse_category_id:this.warehouse_category_id}).then(function(t){t.result&&(e.warehouseList=e.warehouseList.concat(t.data))})},sure:function(){var e=this,t=this;this.params.order_id=this.order_id,this.params.warehouse_name_id=this.warehouse_name_id,this.params.warehouse_category_id=this.warehouse_category_id,Object(_.m)(this.params).then(function(a){a.result?(e.dialogVisible=!1,e.timer=window.setTimeout(function(){t.getMaterialList()},1500)):e.$message({showClose:!0,message:a.msg,type:"error"})})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"storage_content"},[a("v-typesearch",{on:{search:e.search,getMaterialList:e.getMaterialList}}),e._v(" "),a("div",[[a("el-table",{attrs:{"header-cell-style":{background:"#DFEBF9",color:"#606266"},loading:e.loading,data:e.matlist,"empty-text":e.$t("common.nodata"),border:""}},[a("el-table-column",{attrs:{label:e.$t("common.No"),type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shelf_id",label:e.$t("storage.shelf_id")}}),e._v(" "),a("el-table-column",{attrs:{prop:"part_num",label:e.$t("storage.part_num")}}),e._v(" "),a("el-table-column",{attrs:{prop:"label_code",label:e.$t("storage.label_code")}}),e._v(" "),a("el-table-column",{attrs:{prop:"warehouse_name",label:e.$t("storage.warehouse_name")}}),e._v(" "),a("el-table-column",{attrs:{prop:"customer",label:e.$t("storage.customer_name")}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplier_name",label:e.$t("storage.supplier_name")}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"position",label:e.$t("storage.position")}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"description",label:e.$t("storage.description")}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:e.$t("storage.state")},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.state?a("span",{staticClass:"take_mat_span"},[e._v("在库")]):e._e(),e._v(" "),1==t.row.state?a("span",{staticClass:"stay_mat_span"},[e._v("待取")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:e.$t("common.operation"),width:"98"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!!t.row.state},on:{click:function(a){return e.takeOut(t.row)}}},[e._v(e._s(e.$t("storage.take_out")))])]}}])})],1)],e._v(" "),a("div",{staticClass:"hh"},[a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"storagedetail_input"},[a("span",[e._v(e._s(e.$t("storage.quantity"))+": ")]),e._v(" "),a("span",[e._v(e._s(e.materialNum))])]),e._v(" "),a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[e._v(e._s(e.$t("storage.order_code")))]),e._v(" "),a("el-input",{attrs:{placeholder:e.$t("storage.orderidtips")},model:{value:e.order_id,callback:function(t){e.order_id=t},expression:"order_id"}})],1),e._v(" "),a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[e._v(e._s(e.$t("storage.category_name")))]),e._v(" "),a("el-select",{attrs:{"value-key":"id"},on:{change:e.categoryTypeChange},model:{value:e.warehouse_category_id,callback:function(t){e.warehouse_category_id=t},expression:"warehouse_category_id"}},e._l(e.categoryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.category_name,value:e.id}})}),1)],1),e._v(" "),a("div",{staticClass:"storagedetail_input"},[a("span",{staticClass:"storagedetail_title"},[e._v(e._s(e.$t("storage.warehouse_name")))]),e._v(" "),a("el-select",{attrs:{"value-key":"id"},model:{value:e.warehouse_name_id,callback:function(t){e.warehouse_name_id=t},expression:"warehouse_name_id"}},e._l(e.warehouseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.warehouse_name,value:e.id}})}),1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.sure}},[e._v("确 定")])],1)])],1)],2),e._v(" "),a("v-pagination",{attrs:{totalNum:e.totalNum},on:{listenPagesize:e.changePagesize,listenCurrentpage:e.changeCurrent}})],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("TG3W")},"data-v-10dcc8b7",null);t.default=m.exports},NBFj:function(e,t,a){"use strict";var s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pagination"},[t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":1,"page-sizes":[5,10,20,50],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:this.totalNum},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)])},staticRenderFns:[]};var i=a("VU/8")({props:["totalNum"],data:function(){return{}},mounted:function(){},methods:{handleSizeChange:function(e){this.$emit("listenPagesize",e)},handleCurrentChange:function(e){this.$emit("listenCurrentpage",e)}}},s,!1,function(e){a("RyWV")},null,null);t.a=i.exports},QMhJ:function(e,t){},RyWV:function(e,t){},TG3W:function(e,t){},fqaS:function(e,t){}});
//# sourceMappingURL=8.7a8645dfd09d161af9a4.js.map